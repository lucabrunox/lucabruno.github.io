<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Tdpkg troubleshooting and some news | Luca Bruno blog</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="Hello,
lately I&rsquo;ve received some feedback, thanks for this.
Is it compatible with apt? Can I use dpkg back again after using tdpkg?
The answer is&hellip; yes! You can use what you want in the order you want, and use tdpkg when you want. Take in consideration that after using dpkg (or apt) without tdpkg, then you use tdpkg the cache will be rebuilt for consistency.
It&rsquo;s not working here (Ubuntu, other distro&hellip;), doesn&rsquo;t create the cache.">
    <meta name="generator" content="Hugo 0.125.2">
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    
    

    
<link rel="stylesheet" href="/ananke/css/main.min.css" >



    

    
      

    

    

    
      <link rel="canonical" href="https://lucabrun.github.io/2010/03/tdpkg-and-some-news.html">
    

    <meta property="og:url" content="https://lucabrun.github.io/2010/03/tdpkg-and-some-news.html">
  <meta property="og:site_name" content="Luca Bruno blog">
  <meta property="og:title" content="Tdpkg troubleshooting and some news">
  <meta property="og:description" content="Hello,
lately I&amp;rsquo;ve received some feedback, thanks for this.
Is it compatible with apt? Can I use dpkg back again after using tdpkg?
The answer is&amp;hellip; yes! You can use what you want in the order you want, and use tdpkg when you want. Take in consideration that after using dpkg (or apt) without tdpkg, then you use tdpkg the cache will be rebuilt for consistency.
It&amp;rsquo;s not working here (Ubuntu, other distro&amp;hellip;), doesn&amp;rsquo;t create the cache.">
  <meta property="og:locale" content="en-us">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2010-03-16T13:05:00-07:00">
    <meta property="article:modified_time" content="2010-03-16T13:05:00-07:00">
    <meta property="article:tag" content="Dpkg">
    <meta property="article:tag" content="Aptitude">
    <meta property="article:tag" content="Tdpkg">
    <meta property="article:tag" content="Debian">

  <meta itemprop="name" content="Tdpkg troubleshooting and some news">
  <meta itemprop="description" content="Hello,
lately I&rsquo;ve received some feedback, thanks for this.
Is it compatible with apt? Can I use dpkg back again after using tdpkg?
The answer is&hellip; yes! You can use what you want in the order you want, and use tdpkg when you want. Take in consideration that after using dpkg (or apt) without tdpkg, then you use tdpkg the cache will be rebuilt for consistency.
It&rsquo;s not working here (Ubuntu, other distro&hellip;), doesn&rsquo;t create the cache.">
  <meta itemprop="datePublished" content="2010-03-16T13:05:00-07:00">
  <meta itemprop="dateModified" content="2010-03-16T13:05:00-07:00">
  <meta itemprop="wordCount" content="267">
  <meta itemprop="keywords" content="Dpkg,Aptitude,Tdpkg,Debian"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Tdpkg troubleshooting and some news">
<meta name="twitter:description" content="Hello,
lately I&rsquo;ve received some feedback, thanks for this.
Is it compatible with apt? Can I use dpkg back again after using tdpkg?
The answer is&hellip; yes! You can use what you want in the order you want, and use tdpkg when you want. Take in consideration that after using dpkg (or apt) without tdpkg, then you use tdpkg the cache will be rebuilt for consistency.
It&rsquo;s not working here (Ubuntu, other distro&hellip;), doesn&rsquo;t create the cache.">

	
  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        Luca Bruno blog
      
    </a>
    <div class="flex-l items-center">
      

      
      
<div class="ananke-socials">
  
</div>

    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked ttu">
          
        Posts
      </aside>
      










  <div id="sharing" class="mt3 ananke-socials">
    
  </div>


      <h1 class="f1 athelas mt3 mb1">Tdpkg troubleshooting and some news</h1>
      
      
      
      <time class="f6 mv4 dib tracked" datetime="2010-03-16T13:05:00-07:00">March 16, 2010</time>
      

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><p>Hello,<br>
lately I&rsquo;ve received some feedback, thanks for this.</p>
<ol>
<li>
<p>Is it compatible with apt? Can I use dpkg back again after using tdpkg?<br>
The answer is&hellip; yes! You can use what you want in the order you want, and use tdpkg when you want. Take in consideration that after using dpkg (or apt) without tdpkg, then you use tdpkg the cache will be rebuilt for consistency.</p>
</li>
<li>
<p>It&rsquo;s not working here (Ubuntu, other distro&hellip;), doesn&rsquo;t create the cache.<br>
First of all you have to be root when first running tdpkg in order to create the cache. If this didn&rsquo;t solve the problem you are maybe using an untested platform. Debian uses eglibc and tdpkg has been tested on i386 and amd64. Since tdpkg does wrapping around glibc calls it might happen to not wrap the right functions. If you want tdpkg to be ported to your platform please comment here with the result of these commands:<br>
objdump -T /usr/bin/dpkg|grep open<br>
objdump -T /usr/bin/dpkg|grep stat<br>
objdump -T libtdpkg.so|grep open<br>
objdump -T libtdpkg.so|grep stat</p>
</li>
<li>
<p>Should I put the alias also for apt-get and aptitude?<br>
Yes you have to. Aptitude and apt-get bypass the shell so the only alias for dpkg won&rsquo;t work.</p>
</li>
</ol>
<p>Another thing I&rsquo;d like to say is that dpkg/experimental has a patch that speeds up a lot database reading by asking the kernel to cache .list files&hellip; i.e. dpkg will avoid cold start. This brings timing from 14 seconds to about 3 seconds! At all, using tokyocabinet you get 1 second. Think that including a cache inside dpkg would mean even less than 1 second.</p>
<p>Have fun&hellip; :)</p>
<ul class="pa0">
  
   <li class="list di">
     <a href="/tags/dpkg/" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Dpkg</a>
   </li>
  
   <li class="list di">
     <a href="/tags/aptitude/" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Aptitude</a>
   </li>
  
   <li class="list di">
     <a href="/tags/tdpkg/" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Tdpkg</a>
   </li>
  
   <li class="list di">
     <a href="/tags/debian/" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Debian</a>
   </li>
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




  <div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
    <p class="f5 b mb3">Related</p>
    <ul class="pa0 list">
	   
	     <li  class="mb2">
          <a href="/2010/03/tdpkg-speed-up-reading-dpkg-database.html">Tdpkg 1.0 - speed up reading dpkg database</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/2008/12/aptitude-gtk-progress.html">Aptitude-gtk progress</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/2010/03/debiangnome-bug-triage-ended.html">Debian/GNOME bug triage ended</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/2009/08/new-gpg-key.html">New GPG key</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/2009/02/awesomeother-wrong-keyboard-layout.html">Awesome/other wrong keyboard layout</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/2008/12/mailmbox-to-mbox.html">Mailbox-to-mbox</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/2008/10/how-to-contribute-to-apt.html">How to contribute to APT</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/2008/09/debian-get-satisfaction.html">Debian Get Satisfaction</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/2008/08/compiz-with-ati-rs480-on-debian.html">Compiz with ATI RS480 on Debian</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/2008/08/gnome-main-menu.html">Gnome main menu</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/2008/08/kqemu-on-debian-amd64.html">kqemu on Debian amd64</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/2008/08/debian-and-zd1211-wifi.html">Debian and zd1211 wifi</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/2008/06/new-debian-tool-proposal.html">New debian tool proposal</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/2008/04/time-for-debian.html">Time for Debian</a>
        </li>
	    
    </ul>
</div>

</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://lucabrun.github.io/" >
    &copy;  Luca Bruno blog 2024 
  </a>
    <div>
<div class="ananke-socials">
  
</div>
</div>
  </div>
</footer>

  </body>
</html>
